const puppeteer = require('puppeteer');

function generateUUID() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    const r = Math.random() * 16 | 0;
    const v = c === 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(16);
  });
}

const fixedMessage = `銀翼万歳`;

(async () => {
  const browser = await puppeteer.launch({
    headless: false, // 実際に動作が見えるように
  });
  const page = await browser.newPage();
  await page.goto('https://web.line.me/', { waitUntil: 'networkidle0' });

  // ここで手動ログインが必要（またはCookie保存）

  // チャット画面に移動後、以下を実行
  for (let i = 0; i < 10; i++) {
    const message = `${fixedMessage}\n${generateUUID()}`;
    await page.type('textarea[placeholder="メッセージを入力"]', message);
    await page.keyboard.press('Enter');
    await page.waitForTimeout(1000); // 1秒待機（速すぎるとBANのリスク）
  }

  // await browser.close();
})();
